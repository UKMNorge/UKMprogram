{% extends "Layout/base.html.twig" %}

{% block forklaring %}
	<div class="small">
		<b>Tegnforklaring:</b>
		<br />
		🔓 / 🔐 Offentlig / intern hendelse
		<br />
		😃 / ☹️ Synlig / skjult fra rammeprogram
		<br />
		🙉 / 🙈 Synlig / skjulte detaljer for hendelsen
	</div>
{% endblock %}

{% block content %}

	<div class="pull-right" style="margin-right: 1em;">
		<p>
			<a href="?page={{ GET('page') }}&action=hendelse&id=new" class="btn btn-success">Legg til hendelse</a>
		</p>
	</div>	

	<table class="program">
		<thead>
			<tr>
				{% for dag in monstring.getDager() %}
					<th>
						{{ dag|dato('D j. M') }}
					</th>
				{% endfor %}
			</tr>
		</thead>
		<tbody>
			<tr>
				{% for dag in monstring.getDager() %}
					<td class="kolonne tot-{{ monstring.getAntallDager() }}">					
						{% for hendelse in program[ dag|dato('d_m') ].forestillinger %}
							<div class="hendelse panel panel-{{ hendelse.erSynligRammeprogram() ? 'success' : 'danger' }}">
								<div class="panel-heading">
									{#
									<div class="caron">
										&caron;
									</div>
									#}
									<div class="icon toggleState" data-state="{{ hendelse.erIntern() ? 'on' : 'off' }}">
										<div class="state-on" {{ not hendelse.erIntern() ? 'style="display:none;"' }} title="Synlig i offentlig program">🔓</div>
										<div class="state-off" {{ hendelse.erIntern() ? 'style="display:none;"' }} title="Intern hendelse">🔐</div>
									</div>
									<div class="icon toggleState" data-state="{{ hendelse.harSynligDetaljprogram() ? 'on' : 'off' }}">
										<div class="state-on" {{ not hendelse.harSynligDetaljprogram() ? 'style="display:none;"' }} title="Detaljprogrammet er synlig">🙉</div>
										<div class="state-off" {{ hendelse.harSynligDetaljprogram() ? 'style="display:none;"' }} title="Detaljprogrammet er skjult">🙈</div>
									</div>
									
									<div class="icon toggleState toggleSynlig" data-state="{{ hendelse.erSynligRammeprogram() ? 'on' : 'off' }}">
										<div class="state-on" {{ not hendelse.erSynligRammeprogram() ? 'style="display:none;"' }} title="Vises i programmet">😃</div>
										<div class="state-off" {{ hendelse.erSynligRammeprogram() ? 'style="display:none;"' }} title="Vises ikke i programmet">☹️</div>
									</div>

									<h3 class="panel-title">
										{{ hendelse.getStart()|dato('h:i') }}
										{{ hendelse.getNavn() }}
									</h3>
								</div>
								
								<div class="panel-body">
									{% if hendelse.getType() == 'default' %}
										{{ hendelse.getInnslag().getAntall() }} innslag
										Ukjent tid
									{% elseif hendelse.getType() == 'post' %}
										Viser et innlegg
									{% elseif hendelse.getType() == 'category' %}
										Viser innlegg fra en kategori
									{% else %}
										En feil har oppstått. {{ hendelse.getType() }}
									{% endif %}
								</div>
							</div>
						{% else %}
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">Ingen hendelser {{ dag|dato('l j') }}.</h3>
								</div>
								<div class="panel-body">
								</div>
							</div>
						{% endfor %}

						{#
						<p class="mt-3">
							<a href="?page={{ GET('page') }}&action=create">Legg til hendelse</a>
						</p>
						#}

					</td>
				{% endfor %}
			</tr>
		</tbody>
	</table>
{% endblock %}
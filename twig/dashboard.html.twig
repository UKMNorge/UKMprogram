{% extends "Layout/base.html.twig" %}

{% block forklaring %}
	<div class="small">
		<b>Tegnforklaring:</b>
		<br />
		<span class="dashicons dashicons-tickets"></span> / <span class="dashicons dashicons-nametag"></span>
        Offentlig / intern hendelse
		<br />
		<span class="dashicons dashicons-visibility"></span> / <span class="dashicons dashicons-hidden"></span>
        Synlig / skjult fra rammeprogram
		<br />
		<span class="dashicons dashicons-unlock"></span> / <span class="dashicons dashicons-lock"></span>
        Synlig / skjulte detaljer for hendelsen
	</div>
{% endblock %}

{% block content %}
	<div class="pull-right" style="margin-right: 1em;">
		<p>
			<a href="?page={{ GET('page') }}&action=hendelse&id=new" class="btn btn-success">Legg til hendelse</a>
		</p>
	</div>	

	<table class="program">
		<thead>
			<tr>
				{% for dag in arrangement.getDager() %}
					<th>
						{{ dag|dato('D j. M') }}
					</th>
				{% endfor %}
			</tr>
		</thead>
		<tbody>
			<tr>
				{% for dag in arrangement.getDager() %}
					<td class="kolonne tot-{{ arrangement.getAntallDager() }}">					
						{% for hendelse in program[ dag|dato('d_m') ].forestillinger %}
							<div class="hendelse panel panel-{{ hendelse.erSynligRammeprogram() ? 'success' : 'danger' }}" data-id="{{ hendelse.getId() }}">
								<div class="panel-heading">
									{#
									<div class="caron">
										&caron;
									</div>
									#}
									<div class="icon toggleState" data-controller="erIntern" data-state="{{ hendelse.erIntern() ? 'on' : 'off' }}">
										<div class="state-on" {{ not hendelse.erIntern() ? 'style="display:none;"' }} title="Intern hendelse"><span class="dashicons dashicons-nametag"></span></div>
										<div class="state-off" {{ hendelse.erIntern() ? 'style="display:none;"' }} title="Synlig i offentlig program"><span class="dashicons dashicons-tickets"></span></div>
									</div>
									<div class="icon toggleState" data-controller="synligDetaljprogram" data-state="{{ hendelse.harSynligDetaljprogram() ? 'on' : 'off' }}">
										<div class="state-on" {{ not hendelse.harSynligDetaljprogram() ? 'style="display:none;"' }} title="Detaljprogrammet er synlig"><span class="dashicons dashicons-unlock"></span></div>
										<div class="state-off" {{ hendelse.harSynligDetaljprogram() ? 'style="display:none;"' }} title="Detaljprogrammet er skjult"><span class="dashicons dashicons-lock"></span></div>
									</div>
									
									<div class="icon toggleState toggleSynlig" data-controller="synligRammeprogram" data-state="{{ hendelse.erSynligRammeprogram() ? 'on' : 'off' }}">
										<div class="state-on" {{ not hendelse.erSynligRammeprogram() ? 'style="display:none;"' }} title="Vises i programmet"><span class="dashicons dashicons-visibility"></span></div>
										<div class="state-off" {{ hendelse.erSynligRammeprogram() ? 'style="display:none;"' }} title="Vises ikke i programmet"><span class="dashicons dashicons-hidden"></span></div>
									</div>

									<h3 class="panel-title">
										{{ hendelse.getStart()|dato('H:i') }}
										<a href="?page={{ GET('page') }}&action=hendelse&id={{ hendelse.getId() }}">{{ hendelse.getNavn() }}</a>
									</h3>
								</div>
								
								<div class="panel-body">
									{% if hendelse.getType() == 'default' %}
										{{ hendelse.getInnslag().getAntall() }} innslag
										Ukjent tid
									{% elseif hendelse.getType() == 'post' %}
										Viser et innlegg
									{% elseif hendelse.getType() == 'category' %}
										Viser innlegg fra en kategori
									{% else %}
										En feil har oppst√•tt. {{ hendelse.getType() }}
									{% endif %}
								</div>
							</div>
						{% else %}
							<div class="panel">
								<div class="panel-heading">
									<p class="panel-title"><span class="text-muted">Ingen hendelser {{ dag|dato('l j') }}.</span></p>
								</div>
							</div>
						{% endfor %}

						{#
						<p class="mt-3">
							<a href="?page={{ GET('page') }}&action=create">Legg til hendelse</a>
						</p>
						#}

					</td>
				{% endfor %}
			</tr>
		</tbody>
	</table>
{% endblock %}